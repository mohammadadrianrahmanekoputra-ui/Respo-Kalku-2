<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kuis Kalkulus ‚Äì Adrian</title>

<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
  /* 1. DEFINE VARIABLES FOR BOTH THEMES */
  :root {
    /* Colors that don't change */
    --accent: #58a6ff;
    --ok: #16a34a;
    --bad: #ef4444;
  }

  /* Dark Theme (Default) */
  [data-theme="dark"] {
    --bg: #0d1117;
    --text-main: #e6edf3;
    --muted: #8b949e;
    --card-bg: linear-gradient(180deg, #161b22, rgba(22,27,34,0.88));
    --card-border: rgba(255,255,255,0.1);
    --glass: rgba(255,255,255,0.02);
    --glass-hover: rgba(255,255,255,0.05);
    --explain-bg: rgba(13,17,23,0.9);
    --shadow: rgba(2,6,23,0.6);
  }

  /* Light Theme */
  [data-theme="light"] {
    --bg: #f0f2f5;
    --text-main: #1f2937;
    --muted: #64748b;
    --card-bg: #ffffff;
    --card-border: #e2e8f0;
    --glass: #f8fafc;
    --glass-hover: #f1f5f9;
    --explain-bg: #e0f2fe; /* Light blue tint */
    --shadow: rgba(0,0,0,0.05);
    /* Adjust accent slightly for light mode contrast */
    --accent: #0284c7; 
  }

  * { box-sizing: border-box; }
  
  body {
    margin: 0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text-main);
    line-height: 1.5;
    transition: background 0.3s ease, color 0.3s ease;
  }

  header { 
    padding: 28px 16px 8px; 
    text-align: center; 
    position: relative; /* For positioning the toggle button */
  }
  
  h1 { margin: 0; color: var(--accent); font-size: 1.6rem; }
  p.lead { margin: 8px 0 0; color: var(--muted); font-size: 0.95rem; }

  /* Theme Toggle Button */
  .theme-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: transparent;
    border: 1px solid var(--card-border);
    color: var(--muted);
    padding: 8px 12px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.2s;
  }
  .theme-btn:hover { background: var(--glass-hover); color: var(--text-main); }

  .wrap { max-width: 880px; margin: 28px auto; padding: 0 16px; }

  .card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 4px 20px var(--shadow);
    margin-bottom: 20px;
    transition: transform .22s ease, box-shadow .22s ease, background .3s;
  }
  
  .q-title { color: var(--accent); font-weight: 600; margin-bottom: 12px; font-size: 1.05rem; }
  
  .options { display: block; margin: 12px 0 0; }
  
  .option {
    display: flex; align-items: center; justify-content: space-between;
    gap: 12px;
    padding: 12px 14px;
    margin-bottom: 8px;
    background: var(--glass);
    border-radius: 10px;
    border: 1px solid var(--card-border);
    cursor: pointer;
    transition: all .18s ease;
    user-select: none;
    position: relative; /* For accessibility focus */
  }
  
  .option:hover { transform: translateY(-2px); background: var(--glass-hover); }
  
  /* Accessibility: Visually hide radio but keep it functional */
  .option input {
    opacity: 0;
    position: absolute;
    inset: 0;
    cursor: pointer;
  }
  .option:focus-within { outline: 2px solid var(--accent); }

  /* States */
  .option.selected { 
    border-color: var(--accent); 
    background: rgba(88,166,255,0.08); 
  }

  .option.correct {
    background: rgba(22,163,74,0.1);
    border-color: var(--ok);
    color: var(--ok);
  }
  .option.wrong {
    background: rgba(239,68,68,0.1);
    border-color: var(--bad);
    color: var(--bad);
  }

  /* Add Icons via CSS */
  .option.correct::after { content: "‚úî"; font-weight: bold; }
  .option.wrong::after { content: "‚úñ"; font-weight: bold; }

  .explain {
    margin-top: 14px;
    padding: 14px;
    border-left: 4px solid var(--accent);
    background: var(--explain-bg);
    border-radius: 8px;
    display: none;
    color: var(--text-main);
    font-size: 0.95rem;
  }

  .controls { display: flex; gap: 12px; align-items: center; margin-top: 20px; flex-wrap: wrap; }
  
  .btn {
    appearance: none; border: 0; padding: 12px 20px; border-radius: 10px; cursor: pointer;
    font-weight: 600; letter-spacing: .2px; font-size: 0.95rem;
  }
  .btn.primary { background: var(--accent); color: #fff; }
  .btn.primary:hover { opacity: 0.9; }
  
  .btn.ghost { 
    background: transparent; 
    border: 1px solid var(--card-border); 
    color: var(--muted); 
  }
  .btn.ghost:hover { border-color: var(--text-main); color: var(--text-main); }

  .result {
    margin-top: 20px; padding: 16px; border-radius: 12px; text-align: center;
    background: var(--glass);
    border: 1px solid var(--accent);
    font-size: 1.1rem;
    color: var(--text-main);
    animation: pop .35s ease both;
  }

  @keyframes pop { from{transform:scale(.95);opacity:0} to{transform:scale(1);opacity:1} }
  footer { color: var(--muted); text-align: center; margin: 40px 0 60px; font-size: 0.9rem; }

  @media (max-width:520px) {
    .theme-btn { top: 10px; right: 10px; padding: 6px 10px; }
    h1 { font-size: 1.4rem; margin-top: 20px; }
  }
</style>
</head>
<body>

<header>
  <button id="themeToggle" class="theme-btn">‚òÄÔ∏è / üåô Mode</button>
  
  <h1>Kuis Kalkulus</h1>
  <p class="lead">Pilih jawaban untuk setiap soal, lalu tekan <strong>Submit All</strong></p>
</header>

<main class="wrap">
  <div class="card" data-q="1">
    <div class="q-title">1. Diberikan fungsi \( y = x^{f(x)} \) untuk \( x > 0 \). Turunan dari fungsi tersebut adalah:</div>
    <div class="options" data-name="q1">
      <label class="option" data-choice="a">
        <span>a) \( x^{f(x)-1}(xf'(x)+f(x)) \)</span>
        <input type="radio" name="q1" value="a">
      </label>
      <label class="option" data-choice="b">
        <span>b) \( f(x)x^{f(x)-1} + x^{f(x)}\ln x \)</span>
        <input type="radio" name="q1" value="b">
      </label>
      <label class="option" data-choice="c">
        <span>c) \( x^{f(x)}\left(f'(x)\ln x + \frac{f(x)}{x}\right) \)</span>
        <input type="radio" name="q1" value="c">
      </label>
      <label class="option" data-choice="d">
        <span>d) \( x^{f(x)-1}f'(x) \)</span>
        <input type="radio" name="q1" value="d">
      </label>
    </div>
    <div class="explain">
      Ambil logaritma: \( \ln y = f(x)\ln x \). Turunkan: \( \frac{y'}{y} = f'(x)\ln x + \frac{f(x)}{x} \). Jadi \( y' = x^{f(x)}\left(f'(x)\ln x + \frac{f(x)}{x}\right) \).
    </div>
  </div>

  <div class="card" data-q="2">
    <div class="q-title">2. Manakah pernyataan yang benar tentang grafik fungsi \( f \) dan inversnya \( f^{-1} \)?</div>
    <div class="options" data-name="q2">
      <label class="option" data-choice="a">
        <span>a) Grafiknya selalu tegak lurus</span>
        <input type="radio" name="q2" value="a">
      </label>
      <label class="option" data-choice="b">
        <span>b) Grafiknya simetris terhadap garis \( y=x \)</span>
        <input type="radio" name="q2" value="b">
      </label>
      <label class="option" data-choice="c">
        <span>c) Selalu berpotongan di dua titik</span>
        <input type="radio" name="q2" value="c">
      </label>
      <label class="option" data-choice="d">
        <span>d) Tidak ada hubungan khusus</span>
        <input type="radio" name="q2" value="d">
      </label>
    </div>
    <div class="explain">
      Grafik \( f \) dan \( f^{-1} \) selalu simetris terhadap garis \( y=x \). Jika \( (a,b) \in f \), maka \( (b,a) \in f^{-1} \).
    </div>
  </div>

  <div class="card" data-q="3">
    <div class="q-title">3. Pernyataan benar tentang fungsi \( \operatorname{arccot} x \) adalah ‚Ä¶</div>
    <div class="options" data-name="q3">
      <label class="option" data-choice="a">
        <span>a) I saja</span>
        <input type="radio" name="q3" value="a">
      </label>
      <label class="option" data-choice="b">
        <span>b) I, II</span>
        <input type="radio" name="q3" value="b">
      </label>
      <label class="option" data-choice="c">
        <span>c) II, IV</span>
        <input type="radio" name="q3" value="c">
      </label>
      <label class="option" data-choice="d">
        <span>d) I, III, IV</span>
        <input type="radio" name="q3" value="d">
      </label>
    </div>
    <div class="explain">
      I salah (arccot berarti \( \cot y = x \)). II benar (domain seluruh bilangan real). III salah (range biasanya \( (0,\pi) \)). IV benar (arccot 0 = \( \pi/2 \)). Jadi benar: II dan IV.
    </div>
  </div>

  <div class="card" data-q="4">
    <div class="q-title">4. Pernyataan benar tentang fungsi hiperbolik berikut adalah ‚Ä¶</div>
    <div class="options" data-name="q4">
      <label class="option" data-choice="a">
        <span>a) I saja</span>
        <input type="radio" name="q4" value="a">
      </label>
      <label class="option" data-choice="b">
        <span>b) I, II</span>
        <input type="radio" name="q4" value="b">
      </label>
      <label class="option" data-choice="c">
        <span>c) III, IV</span>
        <input type="radio" name="q4" value="c">
      </label>
      <label class="option" data-choice="d">
        <span>d) II, III, IV</span>
        <input type="radio" name="q4" value="d">
      </label>
    </div>
    <div class="explain">
      I salah (tanh adalah fungsi ganjil). II salah (sech adalah genap). III benar (\( \cosh^2 x = 1 + \sinh^2 x \)). IV benar (cosh genap ‚Üí simetri sumbu-y). Jadi benar: III dan IV.
    </div>
  </div>

  <div class="controls">
    <button id="submitBtn" class="btn primary">Submit All</button>
    <button id="resetBtn" class="btn ghost">Reset</button>
  </div>

  <div id="resultWrap"></div>

</main>

<footer>Created by Adrian ¬∑ 2025</footer>

<script>
// Correct answers mapping
const answers = { q1: 'c', q2: 'b', q3: 'c', q4: 'c' };

/* --- 3. THEME LOGIC --- */
const themeBtn = document.getElementById('themeToggle');
const htmlEl = document.documentElement;

// Check LocalStorage
const savedTheme = localStorage.getItem('theme') || 'dark';
htmlEl.setAttribute('data-theme', savedTheme);
updateThemeIcon(savedTheme);

themeBtn.addEventListener('click', () => {
  const current = htmlEl.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  htmlEl.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
  updateThemeIcon(next);
});

function updateThemeIcon(theme) {
  themeBtn.textContent = theme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
}

/* --- QUIZ LOGIC --- */
document.addEventListener('click', (e) => {
  const opt = e.target.closest('.option');
  if (opt && !document.body.classList.contains('submitted')) {
    const parent = opt.parentElement;
    parent.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
    opt.classList.add('selected');
    const input = opt.querySelector('input[type="radio"]');
    if (input) input.checked = true;
  }
});

const submitBtn = document.getElementById('submitBtn');
const resetBtn = document.getElementById('resetBtn');
const resultWrap = document.getElementById('resultWrap');

function evaluate() {
  if (document.body.classList.contains('submitted')) return;

  // Validation: Check if all questions are answered
  const totalQ = document.querySelectorAll('.card').length;
  const answeredQ = document.querySelectorAll('.option.selected').length;
  
  if (answeredQ < totalQ) {
    alert(`Kamu baru menjawab ${answeredQ} dari ${totalQ} soal. Mohon lengkapi!`);
    return;
  }

  document.body.classList.add('submitted');
  let score = 0;
  const cards = document.querySelectorAll('.card');

  cards.forEach(card => {
    const optionsDiv = card.querySelector('.options');
    const qName = optionsDiv.getAttribute('data-name');
    const correct = answers[qName];

    // Reveal Explain
    const ex = card.querySelector('.explain');
    if (ex) ex.style.display = 'block';

    const opts = optionsDiv.querySelectorAll('.option');
    let userSelected = null;
    
    opts.forEach(o => {
      o.classList.remove('correct','wrong'); // clean up
      const val = o.getAttribute('data-choice');
      if (o.querySelector('input').checked) userSelected = val;
    });

    // Mark Correct
    const correctEl = optionsDiv.querySelector(`.option[data-choice="${correct}"]`);
    if (correctEl) correctEl.classList.add('correct');

    // Mark Wrong if selected
    if (userSelected && userSelected !== correct) {
      const wrongEl = optionsDiv.querySelector(`.option[data-choice="${userSelected}"]`);
      if (wrongEl) wrongEl.classList.add('wrong');
    }

    if (userSelected === correct) score++;
  });

  // Show Result
  resultWrap.innerHTML = '';
  const r = document.createElement('div');
  r.className = 'result';
  r.innerHTML = `<strong>Skor: ${score} / ${totalQ}</strong><div style="margin-top:4px; font-size:0.9em; opacity:0.8">Terima kasih telah mengerjakan!</div>`;
  resultWrap.appendChild(r);

  // Refresh MathJax
  if (window.MathJax && MathJax.typeset) MathJax.typeset();
  
  // Scroll to Result
  r.scrollIntoView({behavior: 'smooth', block: 'center'});
}

function resetAll() {
  document.body.classList.remove('submitted');
  resultWrap.innerHTML = '';
  document.querySelectorAll('.explain').forEach(e => e.style.display = 'none');
  document.querySelectorAll('.option').forEach(o => {
    o.classList.remove('selected','wrong','correct');
    const input = o.querySelector('input');
    if (input) input.checked = false;
  });
  window.scrollTo({top:0, behavior:'smooth'});
}

submitBtn.addEventListener('click', evaluate);
resetBtn.addEventListener('click', resetAll);

window.addEventListener('load', () => {
  if (window.MathJax && MathJax.typeset) MathJax.typeset();
});
</script>
</body>
</html>
